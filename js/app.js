window.App=Ember.Application.create({LOG_VIEW_LOOKUPS:!0,LOG_TRANSITIONS:!0,LOG_TRANSITIONS_INTERNAL:!0,LOG_ACTIVE_GENERATION:!0}),Ember.Application.initializer({name:"storage",initialize:function(e,t){t.register("service:storage",window.App.Storage),t.inject("route","storage","service:storage"),t.inject("controller","storage","service:storage")}}),window.App.Router.map(function(){this.route("apikey",{path:"/apikey/:apikey"}),this.resource("raids",function(){}),this.resource("account",function(){this.resource("characters",function(){})})}),window.App.Apikey=Ember.Mixin.create({apikeyItem:"coretheloothound_apikey",getApikey:function(){var e=this.get("apikeyItem");return window.localStorage.getItem(e)},setApikey:function(e){var t=this.get("apikeyItem");return window.localStorage.setItem(t,e)},removeApikey:function(){var e=this.get("apikeyItem");return window.localStorage.removeItem(e)}}),window.App.Session=Ember.Object.extend({init:function(){var e=this,t=window.localStorage.getItem("coretheloothound_apikey");t&&(e.set("apikey",t),e.updateUser())},updateApikey:function(){var e=this.get("apikey");e?window.localStorage.setItem("coretheloothound_apikey",e):window.localStorage.removeItem("coretheloothound_apikey")}.observes("apikey"),updateUser:function(){var e=this,t=this.get("apikey");t?Ember.$.ajax({type:"GET",url:"https://api.byfirebepurged.com/user",headers:{Authorization:"apikey "+t},contentType:"application/json",success:function(t){e.set("user",t.user)}}):e.set("user",void 0)}.observes("apikey")}),window.App.Storage=Ember.Object.extend({base:"coretheloothound_",getValue:function(e){return Modernizr.localstorage?window.localStorage.getItem(this.get("base")+e):Ember.$.cookie(this.get("base")+e)},setValue:function(e,t){Modernizr.localstorage?window.localStorage.setItem(this.get("base")+e,t):Ember.$.cookie(this.get("base")+e,t)},removeValue:function(e){Modernizr.localstorage?window.localStorage.removeItem(this.get("base")+e):Ember.$.removeCookie(this.get("base")+e)}}),Ember.TEMPLATES.account=Ember.Handlebars.template(function(e,t,s,a,r){this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),r=r||{};var n,o="";return r.buffer.push("<h1>"),n=s._triageMustache.call(t,"user.battle_tag",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(n||0===n)&&r.buffer.push(n),r.buffer.push("</h1>\n"),n=s._triageMustache.call(t,"outlet",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(n||0===n)&&r.buffer.push(n),r.buffer.push("\n"),o}),Ember.TEMPLATES.application=Ember.Handlebars.template(function(e,t,s,a,r){function n(e,t){var a,r="";return t.buffer.push('\n      <p class="text-muted">\n        Currently using API Key: '),a=s._triageMustache.call(e,"apikey",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("\n      </p>\n    "),r}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),r=r||{};var o,h,l,i="",c=s.helperMissing,u=this.escapeExpression,p=this;return r.buffer.push('<div class="container">\n  '),r.buffer.push(u((h=s.render||t&&t.render,l={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:r},h?h.call(t,"auth",l):c.call(t,"render","auth",l)))),r.buffer.push('\n  <div class="page-header">\n    <h1>Core the Loot Hound! <small>A World of Warcraft Raiding Site</small></h1>\n  </div>\n  <div>\n    '),o=s._triageMustache.call(t,"outlet",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(o||0===o)&&r.buffer.push(o),r.buffer.push('\n  </div>\n  <footer>\n    <p class="pull-right">\n      &copy; 2014 by Christopher Giroir &lt;<a href="mailto:kelsin@valefor.com">kelsin@valefor.com</a>&gt;\n    </p>\n    <p class="text-muted">\n      Core the Loot Hound is an <a href="http://emberjs.com/">Ember.js</a> front end to the\n      <a href="http://byfirebepurged.com">By Fire Be Purged</a> raid scheduling API.\n    </p>\n    '),o=s["if"].call(t,"loggedIn",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(1,n,r),contexts:[t],types:["ID"],data:r}),(o||0===o)&&r.buffer.push(o),r.buffer.push('\n    <p class="text-muted">\n      You can <a href="http://coretheloothound.com/doc">view the docs</a>, help\n      <a href="http://code.coretheloothound.com">contribute</a>, and\n      <a href="http://issues.coretheloothound.com">open an issue</a> for any problems.\n    </p>\n  </footer>\n</div>\n'),i}),Ember.TEMPLATES.auth=Ember.Handlebars.template(function(e,t,s,a,r){function n(e,t){t.buffer.push("Home")}function o(e,t){var a,r,n,o="";return t.buffer.push("\n    <li>"),r=s["link-to"]||e&&e["link-to"],n={hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(4,h,t),contexts:[e],types:["STRING"],data:t},a=r?r.call(e,"raids",n):b.call(e,"link-to","raids",n),(a||0===a)&&t.buffer.push(a),t.buffer.push("</li>\n    <li>"),r=s["link-to"]||e&&e["link-to"],n={hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(6,l,t),contexts:[e],types:["STRING"],data:t},a=r?r.call(e,"characters",n):b.call(e,"link-to","characters",n),(a||0===a)&&t.buffer.push(a),t.buffer.push("</li>\n    <li>"),a=s._triageMustache.call(e,"user.battle_tag",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push('</li>\n    <li><button class="btn btn-sm btn-default" '),t.buffer.push(m(s.action.call(e,"logout",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(">Logout</button></li>\n  "),o}function h(e,t){t.buffer.push("Raids")}function l(e,t){t.buffer.push("Characters")}function i(e,t){var a="";return t.buffer.push('\n    <li><button class="btn btn-sm btn-primary" '),t.buffer.push(m(s.action.call(e,"login",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(">Login</button></li>\n  "),a}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),r=r||{};var c,u,p,f="",d=this,b=s.helperMissing,m=this.escapeExpression;return r.buffer.push('<ul class="auth">\n  <li>'),u=s["link-to"]||t&&t["link-to"],p={hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(1,n,r),contexts:[t],types:["STRING"],data:r},c=u?u.call(t,"index",p):b.call(t,"link-to","index",p),(c||0===c)&&r.buffer.push(c),r.buffer.push("</li>\n  "),c=s["if"].call(t,"loggedIn",{hash:{},hashTypes:{},hashContexts:{},inverse:d.program(8,i,r),fn:d.program(3,o,r),contexts:[t],types:["ID"],data:r}),(c||0===c)&&r.buffer.push(c),r.buffer.push("\n</ul>\n"),f}),Ember.TEMPLATES.characters=Ember.Handlebars.template(function(e,t,s,a,r){this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),r=r||{};var n,o="";return r.buffer.push('<div class="characters">\n  <h2>Characters</h2>\n  '),n=s._triageMustache.call(t,"outlet",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(n||0===n)&&r.buffer.push(n),r.buffer.push("\n</div>\n"),o}),Ember.TEMPLATES.user=Ember.Handlebars.template(function(e,t,s,a,r){function n(e,t){var a,r,n,o="";return t.buffer.push('\n    <div class="character">\n      <h3>'),a=s._triageMustache.call(e,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push(" <small>"),a=s._triageMustache.call(e,"level",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push(" "),a=s._triageMustache.call(e,"realm",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("</small></h3>\n      <img "),t.buffer.push(p(s["bind-attr"].call(e,{hash:{src:"image_url"},hashTypes:{src:"STRING"},hashContexts:{src:e},contexts:[],types:[],data:t}))),t.buffer.push("/>\n      <p>"),t.buffer.push(p((r=s["class"]||e&&e["class"],n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},r?r.call(e,"class",n):f.call(e,"class","class",n)))),t.buffer.push("</p>\n      <p>"),a=s._triageMustache.call(e,"spec.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("</p>\n      <p><span "),t.buffer.push(p(s["bind-attr"].call(e,{hash:{"class":"faction race"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},contexts:[],types:[],data:t}))),t.buffer.push(">"),t.buffer.push(p((r=s.race||e&&e.race,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},r?r.call(e,"race",n):f.call(e,"race","race",n)))),t.buffer.push("</span></p>\n    </div>\n  "),o}function o(e,t){var a,r="";return t.buffer.push('\n    <div class="alert alert-info">No '),a=s["if"].call(e,"onlyMax",{hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(4,h,t),contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("Characters</div>\n  "),r}function h(e,t){t.buffer.push("Max Level ")}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),r=r||{};var l,i,c,u="",p=this.escapeExpression,f=s.helperMissing,d=this;return r.buffer.push("<h1>"),l=s._triageMustache.call(t,"user.battle_tag",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(l||0===l)&&r.buffer.push(l),r.buffer.push("</h1>\n<dl>\n  <dt>By Fire Be Purged API Key</dt>\n  <dd>"),l=s._triageMustache.call(t,"session.apikey",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:r}),(l||0===l)&&r.buffer.push(l),r.buffer.push('</dd>\n</dl>\n<div class="characters">\n  <h2>Characters</h2>\n  <div class="well form-inline">\n    <div class="col-xs-2">\n      <label for="realms">Realm</label>\n      '),r.buffer.push(p(s.view.call(t,"Ember.Select",{hash:{id:"realms",content:"realms",value:"realm"},hashTypes:{id:"STRING",content:"ID",value:"ID"},hashContexts:{id:t,content:t,value:t},contexts:[t],types:["ID"],data:r}))),r.buffer.push('\n    </div>\n    <div class="checkbox col-xs-4">\n      <label class="checkbox-inline">'),r.buffer.push(p((i=s.input||t&&t.input,c={hash:{type:"checkbox",checked:"onlyMax"},hashTypes:{type:"STRING",checked:"ID"},hashContexts:{type:t,checked:t},contexts:[],types:[],data:r},i?i.call(t,c):f.call(t,"input",c)))),r.buffer.push(" Only show level 90 characters</label>\n    </div>\n  </div>\n  "),l=s.each.call(t,"characters",{hash:{},hashTypes:{},hashContexts:{},inverse:d.program(3,o,r),fn:d.program(1,n,r),contexts:[t],types:["ID"],data:r}),(l||0===l)&&r.buffer.push(l),r.buffer.push("\n</div>\n"),u}),Ember.TEMPLATES["characters/index"]=Ember.Handlebars.template(function(e,t,s,a,r){function n(e,t){var a,r,n,o="";return t.buffer.push('\n    <div class="character col-md-4">\n      <h3>'),a=s._triageMustache.call(e,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push(" <small>"),a=s._triageMustache.call(e,"level",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push(" "),a=s._triageMustache.call(e,"realm",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("</small></h3>\n      <img "),t.buffer.push(p(s["bind-attr"].call(e,{hash:{src:"image_url"},hashTypes:{src:"STRING"},hashContexts:{src:e},contexts:[],types:[],data:t}))),t.buffer.push("/>\n      <p>"),t.buffer.push(p((r=s["class"]||e&&e["class"],n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},r?r.call(e,"class",n):f.call(e,"class","class",n)))),t.buffer.push("</p>\n      <p>"),a=s._triageMustache.call(e,"spec.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("</p>\n      <p><span "),t.buffer.push(p(s["bind-attr"].call(e,{hash:{"class":"faction race"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},contexts:[],types:[],data:t}))),t.buffer.push(">"),t.buffer.push(p((r=s.race||e&&e.race,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},r?r.call(e,"race",n):f.call(e,"race","race",n)))),t.buffer.push("</span></p>\n    </div>\n  "),o}function o(e,t){var a,r="";return t.buffer.push('\n    <div class="alert alert-info">No '),a=s["if"].call(e,"onlyMax",{hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(4,h,t),contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("Characters</div>\n  "),r}function h(e,t){t.buffer.push("Max Level ")}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),r=r||{};var l,i,c,u="",p=this.escapeExpression,f=s.helperMissing,d=this;return r.buffer.push('<div class="well form">\n  <div class="form-group">\n    <label for="realms">Realm</label>\n    '),r.buffer.push(p(s.view.call(t,"Ember.Select",{hash:{id:"realms","class":"form-control",content:"realms",value:"realm"},hashTypes:{id:"STRING","class":"STRING",content:"ID",value:"ID"},hashContexts:{id:t,"class":t,content:t,value:t},contexts:[t],types:["ID"],data:r}))),r.buffer.push('\n  </div>\n  <div class="checkbox">\n    <label>'),r.buffer.push(p((i=s.input||t&&t.input,c={hash:{type:"checkbox",checked:"onlyMax"},hashTypes:{type:"STRING",checked:"ID"},hashContexts:{type:t,checked:t},contexts:[],types:[],data:r},i?i.call(t,c):f.call(t,"input",c)))),r.buffer.push(' Only show level 90 characters</label>\n  </div>\n</div>\n<div class="row">\n  '),l=s.each.call(t,"filtered",{hash:{},hashTypes:{},hashContexts:{},inverse:d.program(3,o,r),fn:d.program(1,n,r),contexts:[t],types:["ID"],data:r}),(l||0===l)&&r.buffer.push(l),r.buffer.push("\n</div>\n"),u}),Ember.Handlebars.helper("class",function(e){var t={1:"Warrior",2:"Paladin",3:"Hunter",4:"Rogue",5:"Priest",6:"Death Knight",7:"Shaman",8:"Mage",9:"Warlock",10:"Monk",11:"Druid"};return new Ember.Handlebars.SafeString('<span class="class-'+e+'">'+t[e]+"</span>")}),Ember.Handlebars.helper("faction",function(e){switch(e){case 1:case 3:case 4:case 7:case 11:case 22:case 25:return"Alliance";case 2:case 5:case 6:case 8:case 9:case 10:case 26:return"Horde";case 24:default:return"Neutral"}}),Ember.Handlebars.helper("race",function(e){var t=function(e){switch(e){case 1:case 3:case 4:case 7:case 11:case 22:case 25:return"alliance";case 2:case 5:case 6:case 8:case 9:case 10:case 26:return"horde";case 24:default:return"neutral"}},s={1:"Human",2:"Orc",3:"Dwarf",4:"Night Elf",5:"Undead",6:"Tauren",7:"Gnome",8:"Troll",9:"Goblin",10:"Blood Elf",11:"Draenei",22:"Worgen",24:"Pandaren",25:"Pandaren",26:"Pandaren"};return new Ember.Handlebars.SafeString('<span class="'+t(e)+'">'+s[e]+"</span>")}),window.App.AccountRoute=Ember.Route.extend({setupController:function(e){e.set("user",this.modelFor("application").user)}}),window.App.ApikeyRoute=Ember.Route.extend({model:function(e){return e.apikey},afterModel:function(e,t){this.get("storage").setValue("apikey",e),t.send("loadUser"),this.transitionTo("index")}}),window.App.ApplicationRoute=Ember.Route.extend({model:function(){var e=this.get("storage").getValue("apikey");return e?new Ember.RSVP.Promise(function(t,s){Ember.$.ajax({type:"GET",url:"https://api.byfirebepurged.com/user",headers:{Authorization:"apikey "+e},contentType:"application/json",success:function(s){t({apikey:e,user:s.user})},error:s})}):Ember.RSVP.resolve({apikey:void 0,user:void 0})},setupController:function(e,t){e.set("apikey",t.apikey),e.set("user",t.user)},actions:{loadUser:function(){console.log("Refreshing"),this.refresh()}}}),window.App.CharactersIndexRoute=Ember.Route.extend({model:function(){return this.modelFor("application").user.characters}}),window.App.RaidsIndexRoute=Ember.Route.extend(window.App.Apikey,{model:function(){var e=this.getApikey();return e?Ember.$.ajax({type:"GET",url:"https://api.byfirebepurged.com/raids",headers:{Authorization:"apikey "+e},contentType:"application/json"}):this.transitionTo("index")}}),window.App.ApplicationController=Ember.Controller.extend({loggedIn:function(){return!!this.get("user")}.property("user")}),window.App.AuthController=Ember.Controller.extend({needs:["application"],apikey:Ember.computed.alias("controllers.application.apikey"),user:Ember.computed.alias("controllers.application.user"),loggedIn:Ember.computed.alias("controllers.application.loggedIn"),actions:{login:function(){$.ajax({type:"POST",url:"https://api.byfirebepurged.com/login",data:JSON.stringify({redirect:window.location.protocol+"//"+window.location.host+"/#/apikey/"}),contentType:"application/json",success:function(e){window.location=e.href}})},logout:function(){this.get("storage").removeValue("apikey"),this.set("apikey",void 0),this.set("user",void 0),this.transitionToRoute("index")}}}),window.App.CharactersIndexController=Ember.Controller.extend({realm:"All",onlyMax:!0,updateRealm:function(){var e=this.get("realm");e&&window.localStorage.setItem("coretheloothound_realm",e)}.observes("realm"),realms:function(){return this.set("realm",window.localStorage.getItem("coretheloothound_realm")||"All"),["All"].concat(_.uniq(_.map(this.get("model"),function(e){return e.realm})).sort())}.property("model.@each.realm"),sortProperties:["level:desc","name"],sorted:Ember.computed.sort("model","sortProperties"),filtered:function(){var e=this.get("realm"),t=this.get("onlyMax");return this.get("sorted").filter(function(s){return t&&s.level<90?!1:e&&"All"!==e?e===s.realm:!0})}.property("sorted","onlyMax","realm")}),window.App.RaidsIndexController=Ember.ArrayController.extend({sortProperties:["date","title"]}),window.App.UserController=Ember.ObjectController.extend({user:Ember.computed.alias("session.user"),init:function(){this.set("realm","All")},onlyMax:!0,updateRealm:function(){var e=this.get("realm");e&&window.localStorage.setItem("coretheloothound_realm",e)}.observes("realm"),realms:function(){return this.set("realm",window.localStorage.getItem("coretheloothound_realm")||"All"),["All"].concat(_.uniq(_.map(this.get("session.user.characters"),function(e){return e.realm})).sort())}.property("session.user.characters.@each.realm"),characters:function(){var e=this.get("realm"),t=this.get("onlyMax");return _.filter(this.get("user.characters"),function(s){return t&&s.level<90?!1:e&&"All"!==e?e===s.realm:!0}).sort(function(e,t){var s=t.level-e.level;return 0===s?e.name<t.name?-1:e.name>t.name?1:0:s})}.property("user.characters.@each","realm","onlyMax")});
//# sourceMappingURL=maps/app.js.map